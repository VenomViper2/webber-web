import{a as y}from"./chunk-F4ZOWRPP.js";import{b as T}from"./chunk-QAD27B26.js";import{j as k}from"./chunk-YRXTET72.js";import{$a as x,Da as E,Ha as b,Ja as m,Ka as d,La as i,Ma as e,Na as p,Qa as h,Ua as r,Va as s,W as S,Wa as u,Xa as P,Ya as I,ab as C,va as c,wa as v}from"./chunk-M4C75B33.js";var F=(a,n)=>n.name;function L(a,n){return this.character.attribute}function $(a,n){return this.character.equipment}function M(a,n){return this.character.inventory}function q(a,n){if(a&1&&(i(0,"tr")(1,"td"),r(2),x(3,"titlecase"),e(),i(4,"td"),r(5),e()()),a&2){let t=n.$implicit;c(2),s(C(3,2,t.name)),c(3),s(t.value)}}function A(a,n){if(a&1&&(i(0,"tr",1)(1,"td",2),r(2),x(3,"titlecase"),e()(),m(4,q,6,4,"tr",null,F)),a&2){let t=n.$implicit,l=h(2);c(2),P("",C(3,2,t.name),": ",t.level,""),c(2),d(l.getSkills(t.skills))}}function w(a,n){if(a&1&&(i(0,"td"),r(1),e(),i(2,"td",3),r(3),e()),a&2){let t=n.$implicit,l=h(2);c(),s(t),c(2),u("/ ",l.getLightLevel(t),"")}}function j(a,n){if(a&1&&(i(0,"td",0),r(1),e()),a&2){let t=n.$implicit;c(),s(t.name)}}function D(a,n){if(a&1&&(i(0,"td",0),r(1),e()),a&2){let t=n.$implicit;c(),s(t)}}function N(a,n){if(a&1&&(i(0,"h2"),r(1,"Character Details"),e(),i(2,"p")(3,"strong"),r(4),e()(),i(5,"p")(6,"strong"),r(7),e()(),i(8,"p")(9,"strong"),r(10),e()(),i(11,"h2"),r(12,"Attributes & Skills"),e(),i(13,"table"),m(14,A,6,4,null,null,F),e(),i(16,"h2"),r(17,"Feats"),e(),i(18,"table")(19,"tr"),m(20,w,4,2,null,null,L,!0),e()(),i(22,"h2"),r(23,"Equipment & Inventory"),e(),i(24,"table")(25,"tr")(26,"td")(27,"strong"),r(28,"Equipment:"),e()(),m(29,j,2,1,"td",0,$,!0),e(),i(31,"tr")(32,"td")(33,"strong"),r(34,"Inventory:"),e()(),m(35,D,2,1,"td",0,M,!0),e()(),i(37,"h2"),r(38,"Magical Properties"),e(),i(39,"table")(40,"tr")(41,"td"),r(42,"Focus:"),e(),p(43,"td"),e(),i(44,"tr")(45,"td"),r(46,"Attunement:"),e(),p(47,"td"),e(),i(48,"tr")(49,"td"),r(50,"Tome:"),e(),p(51,"td"),e(),i(52,"tr")(53,"td"),r(54,"Twists:"),e(),p(55,"td"),e()(),i(56,"h2"),r(57,"Special Feats"),e(),i(58,"table")(59,"tr")(60,"td")(61,"strong"),r(62,"Heavy Strikes"),e()()(),i(63,"tr")(64,"td")(65,"strong"),r(66,"Passive:"),e()()(),i(67,"tr")(68,"td"),r(69,"Red"),e()()()),a&2){let t=h();c(4),u("Name: ",t.character.name,""),c(3),u("Player: ",t.character.player,""),c(3),u("Level: ",t.getLevel(),""),c(4),d(t.character.attribute),c(6),d(t.character.feats),c(9),d(t.character.equipment),c(6),d(t.character.inventory)}}function R(a,n){a&1&&(i(0,"p"),r(1,"Character not found"),e())}var O=class a{constructor(n,t){this.route=n;this.characterService=t}character;ngOnInit(){this.initCharacter()}initCharacter(){this.route.params.subscribe(n=>{let t=n.id;this.characterService.getCharacter(t).subscribe({next:l=>{l&&(this.character=l)},error:l=>{console.error("Error loading Character:",l)}})})}getSkills(n){return Object.entries(n).filter(([t,l])=>l!==void 0).map(([t,l])=>({name:t,value:l}))}getLightLevel(n){if(!this.character||!this.character.attribute)return 0;switch(n){case"red":return this.character.attribute[0].level+this.getLevel();case"green":return this.character.attribute[1].level+this.getLevel();case"blue":return this.character.attribute[2].level+this.getLevel();case"gold":return this.character.attribute[3].level+this.getLevel();default:return 0}}getLevel(){if(!this.character)return 0;let n=this.character.attribute.reduce((f,g)=>f+g.level,0),t=this.character.attribute.reduce((f,g)=>f+Object.values(g.skills).filter(_=>_!==void 0&&_>=3).length,0),l=n+t,o=1;return l>=30?o=6:l>=25?o=5:l>=20?o=4:l>=15?o=3:l>=10&&(o=2),o}static \u0275fac=function(t){return new(t||a)(v(T),v(y))};static \u0275cmp=S({type:a,selectors:[["app-character-page"]],standalone:!0,features:[I],decls:2,vars:1,consts:[["colspan","3"],[1,"section-title"],["colspan","2"],[1,"center"]],template:function(t,l){t&1&&E(0,N,70,3)(1,R,2,0,"p"),t&2&&b(l.character?0:1)},dependencies:[k],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}.section-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;background-color:#ddd}.center[_ngcontent-%COMP%]{text-align:center}"]})};export{O as CharacterPageComponent};
