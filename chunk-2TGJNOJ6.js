import{i as I,j as P,o as B}from"./chunk-RY565XR7.js";import{Da as y,Fa as c,G as k,Ha as u,I as g,Ka as l,L as w,La as d,Ma as a,Na as r,O as A,Oa as p,Ra as S,T as D,Va as s,W as b,Wa as m,Za as _,ab as f,bb as C,i as T,n as F,q as h,r as O,va as o,wa as R,x as $}from"./chunk-PIMBEKZP.js";var v=class i{name;badge;description;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-card"]],inputs:{name:"name",badge:"badge",description:"description"},standalone:!0,features:[_],decls:7,vars:3,consts:[[1,"card"],[1,"font-semibold","mb-2","name"],[1,"badge-span"],[1,"description"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h3",1),s(2),a(3,"span",2),s(4),r()(),a(5,"p",3),s(6),r()()),e&2&&(o(2),m(n.name),o(2),m(n.badge),o(2),m(n.description))}})};var x=class i{constructor(t){this.http=t;this.mechanicsData$=this.initializeMechanicsData()}MECHANICS_URL="data/cheat-sheet.json";RETRY_ATTEMPTS=3;mechanicsData$;initializeMechanicsData(){return this.http.get(this.MECHANICS_URL).pipe(k(this.RETRY_ATTEMPTS),$(this.handleError),g(1))}handleError(t){let e=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server error: ${t.status} ${t.message}`;return console.error("CheetSheetService error:",e),F(()=>new Error(e))}getCombatActions(){return this.mechanicsData$.pipe(h(t=>[...t.combatActions.baseActions,...t.combatActions.reactions]))}getBasicFeats(){return this.mechanicsData$.pipe(h(t=>t.basicFeats))}getAllMechanics(){return this.mechanicsData$}static \u0275fac=function(e){return new(e||i)(D(B))};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})};var E=(i,t)=>t.name,H=(i,t)=>t.rank,U=(i,t)=>t.type;function L(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.description)}}function Y(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.effect)}}function q(i,t){if(i&1&&p(0,"app-card",4),i&2){let e=t.$implicit;c("name",e.rank)("description",e.value.toString())}}function G(i,t){if(i&1&&(p(0,"app-card",4),f(1,"titlecase")),i&2){let e=t.$implicit;c("name",C(1,2,e.name))("description",e.formula)}}function J(i,t){if(i&1&&(p(0,"app-card",4),f(1,"titlecase")),i&2){let e=S().$implicit;c("name",C(1,2,e.type))("description",e.formula)}}function K(i,t){if(i&1&&(p(0,"app-card",4),f(1,"titlecase")),i&2){let e=S().$implicit;c("name",C(1,2,e.type))("description","Fixed Cost: "+e.cost.toString())}}function Q(i,t){if(i&1&&y(0,J,2,4,"app-card",4)(1,K,2,4,"app-card",4),i&2){let e=t.$implicit;u(e.formula?0:-1),o(),u(e.cost!==void 0?1:-1)}}function W(i,t){if(i&1&&(a(0,"section")(1,"h2"),s(2,"Combat Actions"),r(),a(3,"div",2),l(4,L,1,3,"app-card",3,E),r()(),a(6,"section")(7,"h2"),s(8,"Basic Feats"),r(),a(9,"div",2),l(10,Y,1,3,"app-card",3,E),r()(),a(12,"section")(13,"h2"),s(14,"Rank System"),r(),a(15,"p"),s(16),r(),a(17,"div",2),l(18,q,1,2,"app-card",4,H),r()(),a(20,"section")(21,"h2"),s(22,"Derived Stats"),r(),a(23,"div",2),l(24,G,2,4,"app-card",4,E),r()(),a(26,"section")(27,"h2"),s(28,"Experience Costs"),r(),a(29,"div",2),l(30,Q,2,2,null,null,U),r()()),i&2){let e=t,n=S();o(4),d(e.combatActions),o(6),d(e.basicFeats),o(6),m(e.rankSystem.calculation),o(2),d(e.rankSystem.thresholds),o(6),d(n.getStatsEntries(e.characteristics.derivedStats)),o(6),d(n.getExperienceCostEntries(e.experienceCosts))}}var j=class i{constructor(t){this.gameMechanicsService=t;this.viewModel$=this.initializeViewModel()}destroy$=new T;title="Cheat Sheet";viewModel$;initializeViewModel(){return O({mechanics:this.gameMechanicsService.getAllMechanics(),combatActions:this.gameMechanicsService.getCombatActions(),basicFeats:this.gameMechanicsService.getBasicFeats()}).pipe(h(({mechanics:t,combatActions:e,basicFeats:n})=>({combatActions:e,basicFeats:n,characteristics:t.characteristics,rankSystem:t.rankSystem,experienceCosts:t.experienceCosts,boonTriggers:t.boonTriggers})),g(1),w(this.destroy$))}getStatsEntries(t){return Object.entries(t).map(([e,n])=>({name:e,formula:n.formula,baseValue:n.baseValue}))}getExperienceCostEntries(t){return Object.entries(t).map(([e,n])=>({type:e,formula:n.formula,cost:n.cost}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(R(x))};static \u0275cmp=b({type:i,selectors:[["app-cheat-sheet"]],standalone:!0,features:[_],decls:5,vars:4,consts:[[1,"app-container"],[1,"title","center"],[1,"grid-layout"],[3,"name","badge","description"],[3,"name","description"]],template:function(e,n){if(e&1&&(a(0,"div",0)(1,"h1",1),s(2),r(),y(3,W,32,1),f(4,"async"),r()),e&2){let M;o(2),m(n.title),o(),u((M=C(4,2,n.viewModel$))?3:-1,M)}},dependencies:[I,P,v],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:1rem 0}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;border-left:4px solid #3b82f6;padding:1.5rem;box-shadow:0 2px 5px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #00000026}.border-left-red[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;border-radius:1rem;font-size:.85rem;font-weight:600;border:1px solid rgba(0,0,0,.1);text-transform:uppercase}.info-tag[_ngcontent-%COMP%]{display:inline-block;background-color:#f3f4f6;padding:.4rem 1rem;border-radius:.5rem;font-size:.85rem;color:#374151;font-weight:500;margin-right:.5rem;margin-top:.5rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;border-bottom:2px solid #d1d5db;padding-bottom:.5rem}code[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background-color:#f3f4f6;padding:.3rem .7rem;border-radius:.5rem;font-size:.9rem;font-weight:500;color:#1f2937}@media (max-width: 768px){.grid-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{j as CheatSheetComponent};
