import{a as I}from"./chunk-O5F6HXMF.js";import{b as P,c as D,e as B}from"./chunk-K4PDPJNI.js";import{Ea as S,G as O,Ga as c,I as C,Ia as g,L as $,La as m,Ma as l,Na as a,O as F,Oa as n,Pa as p,Sa as b,T as k,W as A,Wa as s,Xa as _,_a as R,ab as h,bb as f,i as x,n as E,q as d,r as M,va as o,wa as w,x as T}from"./chunk-2OH7LUZ3.js";var u=class i{constructor(t){this.http=t;this.mechanicsData$=this.initializeMechanicsData()}MECHANICS_URL="data/cheat-sheet.json";RETRY_ATTEMPTS=3;mechanicsData$;initializeMechanicsData(){return this.http.get(this.MECHANICS_URL).pipe(O(this.RETRY_ATTEMPTS),T(this.handleError),C(1))}handleError(t){let e=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server error: ${t.status} ${t.message}`;return console.error("CheetSheetService error:",e),E(()=>new Error(e))}getCombatActions(){return this.mechanicsData$.pipe(d(t=>[...t.combatActions.baseActions,...t.combatActions.reactions]))}getBasicFeats(){return this.mechanicsData$.pipe(d(t=>t.basicFeats))}getAllMechanics(){return this.mechanicsData$}static \u0275fac=function(e){return new(e||i)(k(B))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var v=(i,t)=>t.name,H=(i,t)=>t.rank,N=(i,t)=>t.type;function U(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.description)("type","red")}}function L(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.effect)("type","blue")}}function Y(i,t){if(i&1&&p(0,"app-card",5),i&2){let e=t.$implicit;c("name",e.rank)("description",e.value.toString())("type","green")}}function q(i,t){if(i&1&&(p(0,"app-card",5),h(1,"titlecase")),i&2){let e=t.$implicit;c("name",f(1,3,e.name))("description",e.formula)("type","orange")}}function G(i,t){if(i&1&&(p(0,"app-card",6),h(1,"titlecase")),i&2){let e=b().$implicit;c("name",f(1,2,e.type))("description",e.formula)}}function J(i,t){if(i&1&&(p(0,"app-card",6),h(1,"titlecase")),i&2){let e=b().$implicit;c("name",f(1,2,e.type))("description","Fixed Cost: "+e.cost.toString())}}function K(i,t){if(i&1&&S(0,G,2,4,"app-card",6)(1,J,2,4,"app-card",6),i&2){let e=t.$implicit;g(e.formula?0:-1),o(),g(e.cost!==void 0?1:-1)}}function Q(i,t){if(i&1&&(a(0,"section")(1,"h2"),s(2,"Combat Actions"),n(),a(3,"div",2),m(4,U,1,4,"app-card",3,v),n()(),a(6,"section",4)(7,"h2"),s(8,"Basic Feats"),n(),a(9,"div",2),m(10,L,1,4,"app-card",3,v),n()(),a(12,"section")(13,"h2"),s(14,"Rank System"),n(),a(15,"p"),s(16),n(),a(17,"div",2),m(18,Y,1,3,"app-card",5,H),n()(),a(20,"section")(21,"h2"),s(22,"Derived Stats"),n(),a(23,"div",2),m(24,q,2,5,"app-card",5,v),n()(),a(26,"section")(27,"h2"),s(28,"Experience Costs"),n(),a(29,"div",2),m(30,K,2,2,null,null,N),n()()),i&2){let e=t,r=b();o(4),l(e.combatActions),o(6),l(e.basicFeats),o(6),_(e.rankSystem.calculation),o(2),l(e.rankSystem.thresholds),o(6),l(r.getStatsEntries(e.characteristics.derivedStats)),o(6),l(r.getExperienceCostEntries(e.experienceCosts))}}var j=class i{constructor(t){this.gameMechanicsService=t;this.viewModel$=this.initializeViewModel()}destroy$=new x;title="Cheat Sheet";viewModel$;initializeViewModel(){return M({mechanics:this.gameMechanicsService.getAllMechanics(),combatActions:this.gameMechanicsService.getCombatActions(),basicFeats:this.gameMechanicsService.getBasicFeats()}).pipe(d(({mechanics:t,combatActions:e,basicFeats:r})=>({combatActions:e,basicFeats:r,characteristics:t.characteristics,rankSystem:t.rankSystem,experienceCosts:t.experienceCosts,boonTriggers:t.boonTriggers})),C(1),$(this.destroy$))}getStatsEntries(t){return Object.entries(t).map(([e,r])=>({name:e,formula:r.formula,baseValue:r.baseValue}))}getExperienceCostEntries(t){return Object.entries(t).map(([e,r])=>({type:e,formula:r.formula,cost:r.cost}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(w(u))};static \u0275cmp=A({type:i,selectors:[["app-cheat-sheet"]],standalone:!0,features:[R],decls:5,vars:4,consts:[[1,"app-container"],[1,"title","center"],[1,"grid-layout"],[3,"name","badge","description","type"],[1,"mb-1"],[3,"name","description","type"],[3,"name","description"]],template:function(e,r){if(e&1&&(a(0,"div",0)(1,"h1",1),s(2),n(),S(3,Q,32,1),h(4,"async"),n()),e&2){let y;o(2),_(r.title),o(),g((y=f(4,2,r.viewModel$))?3:-1,y)}},dependencies:[P,D,I],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:1rem 0}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;border-left:4px solid #3b82f6;padding:1.5rem;box-shadow:0 2px 5px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #00000026}.border-left-red[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;border-radius:1rem;font-size:.85rem;font-weight:600;border:1px solid rgba(0,0,0,.1);text-transform:uppercase}.info-tag[_ngcontent-%COMP%]{display:inline-block;background-color:#f3f4f6;padding:.4rem 1rem;border-radius:.5rem;font-size:.85rem;color:#374151;font-weight:500;margin-right:.5rem;margin-top:.5rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;border-bottom:2px solid #d1d5db;padding-bottom:.5rem}code[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background-color:#f3f4f6;padding:.3rem .7rem;border-radius:.5rem;font-size:.9rem;font-weight:500;color:#1f2937}@media (max-width: 768px){.grid-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{j as CheatSheetComponent};
