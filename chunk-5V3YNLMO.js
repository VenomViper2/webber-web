import{i as P,j as B,o as N}from"./chunk-RY565XR7.js";import{Da as g,Fa as c,G as k,Ha as m,I as S,Ka as d,L as w,La as l,Ma as r,Na as n,O as A,Oa as p,Ra as f,T as D,Va as s,W as _,Wa as h,Xa as I,Za as v,ab as b,bb as u,i as T,n as F,q as C,r as O,va as o,wa as R,x as $}from"./chunk-PIMBEKZP.js";function H(i,t){if(i&1&&(r(0,"span",2),s(1),n()),i&2){let e=f();o(),h(e.badge)}}var x=class i{name;badge;description;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-card"]],inputs:{name:"name",badge:"badge",description:"description"},standalone:!0,features:[v],decls:6,vars:3,consts:[[1,"card"],[1,"font-semibold","mb-2","name"],[1,"badge-span"],[1,"description"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"h3",1),s(2),g(3,H,2,1,"span",2),n(),r(4,"p",3),s(5),n()()),e&2&&(o(2),I("",a.name," "),o(),m(a.badge?3:-1),o(2),h(a.description))}})};var y=class i{constructor(t){this.http=t;this.mechanicsData$=this.initializeMechanicsData()}MECHANICS_URL="data/cheat-sheet.json";RETRY_ATTEMPTS=3;mechanicsData$;initializeMechanicsData(){return this.http.get(this.MECHANICS_URL).pipe(k(this.RETRY_ATTEMPTS),$(this.handleError),S(1))}handleError(t){let e=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server error: ${t.status} ${t.message}`;return console.error("CheetSheetService error:",e),F(()=>new Error(e))}getCombatActions(){return this.mechanicsData$.pipe(C(t=>[...t.combatActions.baseActions,...t.combatActions.reactions]))}getBasicFeats(){return this.mechanicsData$.pipe(C(t=>t.basicFeats))}getAllMechanics(){return this.mechanicsData$}static \u0275fac=function(e){return new(e||i)(D(N))};static \u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"})};var E=(i,t)=>t.name,L=(i,t)=>t.rank,Y=(i,t)=>t.type;function q(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.description)}}function G(i,t){if(i&1&&p(0,"app-card",3),i&2){let e=t.$implicit;c("name",e.name)("badge",e.type)("description",e.effect)}}function J(i,t){if(i&1&&p(0,"app-card",5),i&2){let e=t.$implicit;c("name",e.rank)("description",e.value.toString())}}function K(i,t){if(i&1&&(p(0,"app-card",5),b(1,"titlecase")),i&2){let e=t.$implicit;c("name",u(1,2,e.name))("description",e.formula)}}function Q(i,t){if(i&1&&(p(0,"app-card",5),b(1,"titlecase")),i&2){let e=f().$implicit;c("name",u(1,2,e.type))("description",e.formula)}}function W(i,t){if(i&1&&(p(0,"app-card",5),b(1,"titlecase")),i&2){let e=f().$implicit;c("name",u(1,2,e.type))("description","Fixed Cost: "+e.cost.toString())}}function X(i,t){if(i&1&&g(0,Q,2,4,"app-card",5)(1,W,2,4,"app-card",5),i&2){let e=t.$implicit;m(e.formula?0:-1),o(),m(e.cost!==void 0?1:-1)}}function Z(i,t){if(i&1&&(r(0,"section")(1,"h2"),s(2,"Combat Actions"),n(),r(3,"div",2),d(4,q,1,3,"app-card",3,E),n()(),r(6,"section",4)(7,"h2"),s(8,"Basic Feats"),n(),r(9,"div",2),d(10,G,1,3,"app-card",3,E),n()(),r(12,"section")(13,"h2"),s(14,"Rank System"),n(),r(15,"p"),s(16),n(),r(17,"div",2),d(18,J,1,2,"app-card",5,L),n()(),r(20,"section")(21,"h2"),s(22,"Derived Stats"),n(),r(23,"div",2),d(24,K,2,4,"app-card",5,E),n()(),r(26,"section")(27,"h2"),s(28,"Experience Costs"),n(),r(29,"div",2),d(30,X,2,2,null,null,Y),n()()),i&2){let e=t,a=f();o(4),l(e.combatActions),o(6),l(e.basicFeats),o(6),h(e.rankSystem.calculation),o(2),l(e.rankSystem.thresholds),o(6),l(a.getStatsEntries(e.characteristics.derivedStats)),o(6),l(a.getExperienceCostEntries(e.experienceCosts))}}var z=class i{constructor(t){this.gameMechanicsService=t;this.viewModel$=this.initializeViewModel()}destroy$=new T;title="Cheat Sheet";viewModel$;initializeViewModel(){return O({mechanics:this.gameMechanicsService.getAllMechanics(),combatActions:this.gameMechanicsService.getCombatActions(),basicFeats:this.gameMechanicsService.getBasicFeats()}).pipe(C(({mechanics:t,combatActions:e,basicFeats:a})=>({combatActions:e,basicFeats:a,characteristics:t.characteristics,rankSystem:t.rankSystem,experienceCosts:t.experienceCosts,boonTriggers:t.boonTriggers})),S(1),w(this.destroy$))}getStatsEntries(t){return Object.entries(t).map(([e,a])=>({name:e,formula:a.formula,baseValue:a.baseValue}))}getExperienceCostEntries(t){return Object.entries(t).map(([e,a])=>({type:e,formula:a.formula,cost:a.cost}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(R(y))};static \u0275cmp=_({type:i,selectors:[["app-cheat-sheet"]],standalone:!0,features:[v],decls:5,vars:4,consts:[[1,"app-container"],[1,"title","center"],[1,"grid-layout"],[3,"name","badge","description"],[1,"mb-1"],[3,"name","description"]],template:function(e,a){if(e&1&&(r(0,"div",0)(1,"h1",1),s(2),n(),g(3,Z,32,1),b(4,"async"),n()),e&2){let M;o(2),h(a.title),o(),m((M=u(4,2,a.viewModel$))?3:-1,M)}},dependencies:[P,B,x],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:1rem 0}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;border-left:4px solid #3b82f6;padding:1.5rem;box-shadow:0 2px 5px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #00000026}.border-left-red[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;border-radius:1rem;font-size:.85rem;font-weight:600;border:1px solid rgba(0,0,0,.1);text-transform:uppercase}.info-tag[_ngcontent-%COMP%]{display:inline-block;background-color:#f3f4f6;padding:.4rem 1rem;border-radius:.5rem;font-size:.85rem;color:#374151;font-weight:500;margin-right:.5rem;margin-top:.5rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;border-bottom:2px solid #d1d5db;padding-bottom:.5rem}code[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background-color:#f3f4f6;padding:.3rem .7rem;border-radius:.5rem;font-size:.9rem;font-weight:500;color:#1f2937}@media (max-width: 768px){.grid-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{z as CheatSheetComponent};
