import{a as I}from"./chunk-F4ZOWRPP.js";import{b as M}from"./chunk-QAD27B26.js";import{j as k}from"./chunk-YRXTET72.js";import{$a as h,Da as b,Ha as S,Ja as m,Ka as s,La as i,Ma as e,Na as p,Qa as f,Ua as n,Va as o,W as _,Wa as E,Xa as P,Ya as O,ab as u,va as c,wa as v}from"./chunk-M4C75B33.js";var T=(a,r)=>r.name;function w(a,r){return this.character.attribute}function F(a,r){return this.character.equipment}function L(a,r){return this.character.inventory}function $(a,r){if(a&1&&(i(0,"tr")(1,"td"),n(2),h(3,"titlecase"),e(),i(4,"td"),n(5),e()()),a&2){let t=r.$implicit;c(2),o(u(3,2,t.name)),c(3),o(t.value)}}function A(a,r){if(a&1&&(i(0,"tr",6)(1,"td",9),n(2),h(3,"titlecase"),e()(),m(4,$,6,4,"tr",null,T)),a&2){let t=r.$implicit,l=f(2);c(2),P("",u(3,2,t.name),": ",t.level,""),c(2),s(l.getSkills(t.skills))}}function q(a,r){if(a&1&&(i(0,"tr")(1,"td"),n(2),h(3,"titlecase"),e(),i(4,"td",10),n(5),e()()),a&2){let t=r.$implicit,l=f(2);c(2),o(u(3,2,t)),c(3),E("/ ",l.getLightLevel(t),"")}}function j(a,r){if(a&1&&(i(0,"div",8),n(1),e()),a&2){let t=r.$implicit;c(),o(t.name)}}function B(a,r){if(a&1&&(i(0,"div",8),n(1),h(2,"titlecase"),e()),a&2){let t=r.$implicit;c(),o(u(2,1,t))}}function D(a,r){if(a&1&&(i(0,"div",0)(1,"h2",1),n(2,"Character Details"),e(),i(3,"table",2)(4,"tr")(5,"td")(6,"strong"),n(7,"Name:"),e()(),i(8,"td"),n(9),e()(),i(10,"tr")(11,"td")(12,"strong"),n(13,"Player:"),e()(),i(14,"td"),n(15),e()(),i(16,"tr")(17,"td")(18,"strong"),n(19,"Level:"),e()(),i(20,"td"),n(21),e()()(),i(22,"h2",3),n(23,"Attributes & Skills"),e(),i(24,"table",2),m(25,A,6,4,null,null,T),e(),i(27,"h2",3),n(28,"Feats"),e(),i(29,"table",2),m(30,q,6,4,"tr",null,w,!0),e(),i(32,"h2",3),n(33,"Equipment & Inventory"),e(),i(34,"div",4)(35,"div",5)(36,"h3",6),n(37,"Equipment"),e(),i(38,"div",7),m(39,j,2,1,"div",8,F,!0),e()(),i(41,"div",5)(42,"h3",6),n(43,"Inventory"),e(),i(44,"div",7),m(45,B,3,3,"div",8,L,!0),e()()(),i(47,"h2",3),n(48,"Magical Properties"),e(),i(49,"table",2)(50,"tr")(51,"td"),n(52,"Focus:"),e(),p(53,"td"),e(),i(54,"tr")(55,"td"),n(56,"Attunement:"),e(),p(57,"td"),e(),i(58,"tr")(59,"td"),n(60,"Tome:"),e(),p(61,"td"),e(),i(62,"tr")(63,"td"),n(64,"Twists:"),e(),p(65,"td"),e()(),i(66,"h2",3),n(67,"Special Feats"),e(),i(68,"table",2)(69,"tr",6)(70,"td",9),n(71,"Heavy Strikes"),e()(),i(72,"tr")(73,"td")(74,"strong"),n(75,"Passive:"),e()(),p(76,"td"),e()()()),a&2){let t=f();c(9),o(t.character.name),c(6),o(t.character.player),c(6),o(t.getLevel()),c(4),s(t.character.attribute),c(5),s(t.character.feats),c(9),s(t.character.equipment),c(6),s(t.character.inventory)}}function N(a,r){a&1&&(i(0,"p"),n(1,"Character not found"),e())}var y=class a{constructor(r,t){this.route=r;this.characterService=t}character;ngOnInit(){this.initCharacter()}initCharacter(){this.route.params.subscribe(r=>{let t=r.id;this.characterService.getCharacter(t).subscribe({next:l=>{l&&(this.character=l)},error:l=>{console.error("Error loading Character:",l)}})})}getSkills(r){return Object.entries(r).filter(([t,l])=>l!==void 0).map(([t,l])=>({name:t,value:l}))}getLightLevel(r){if(!this.character||!this.character.attribute)return 0;switch(r){case"red":return this.character.attribute[0].level+this.getLevel();case"green":return this.character.attribute[1].level+this.getLevel();case"blue":return this.character.attribute[2].level+this.getLevel();case"gold":return this.character.attribute[3].level+this.getLevel();default:return 0}}getLevel(){if(!this.character)return 0;let r=this.character.attribute.reduce((g,x)=>g+x.level,0),t=this.character.attribute.reduce((g,x)=>g+Object.values(x.skills).filter(C=>C!==void 0&&C>=3).length,0),l=r+t,d=1;return l>=30?d=6:l>=25?d=5:l>=20?d=4:l>=15?d=3:l>=10&&(d=2),d}static \u0275fac=function(t){return new(t||a)(v(M),v(I))};static \u0275cmp=_({type:a,selectors:[["app-character-page"]],standalone:!0,features:[O],decls:2,vars:1,consts:[[1,"app-container"],[1,"name"],[1,"character-table"],[1,"name","mt-1"],[1,"inventory-container"],[1,"section"],[1,"section-header"],[1,"items-grid"],[1,"item-card"],["colspan","2"],[1,"text-center"]],template:function(t,l){t&1&&b(0,D,77,3,"div",0)(1,N,2,0,"p"),t&2&&S(l.character?0:1)},dependencies:[k],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}.section-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;background-color:#ddd}.character-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.character-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e5e7eb}.section-header[_ngcontent-%COMP%]{background:#f3f4f6;font-weight:700}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-1[_ngcontent-%COMP%]{margin-top:1rem}.inventory-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.section[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.section-header[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;background-color:#f3f4f6;padding:.5rem;border-radius:6px}.items-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;padding:.5rem}.item-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:.75rem 1rem;border-radius:6px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a}"]})};export{y as CharacterPageComponent};
