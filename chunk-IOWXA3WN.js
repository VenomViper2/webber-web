import{i as w,j as R,o as P}from"./chunk-YRXTET72.js";import{$a as v,Da as C,G as T,Ha as d,I as f,Ja as m,Ka as l,L as F,La as n,Ma as a,O as $,Qa as h,T as O,Ua as o,Va as c,W as I,Wa as g,Ya as A,ab as x,i as u,n as y,q as p,r as E,va as r,wa as k,x as M}from"./chunk-M4C75B33.js";var b=class i{constructor(t){this.http=t;this.mechanicsData$=this.initializeMechanicsData()}MECHANICS_URL="data/cheat-sheet.json";RETRY_ATTEMPTS=3;mechanicsData$;initializeMechanicsData(){return this.http.get(this.MECHANICS_URL).pipe(T(this.RETRY_ATTEMPTS),M(this.handleError),f(1))}handleError(t){let e=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server error: ${t.status} ${t.message}`;return console.error("CheetSheetService error:",e),y(()=>new Error(e))}getCombatActions(){return this.mechanicsData$.pipe(p(t=>[...t.combatActions.baseActions,...t.combatActions.reactions]))}getBasicFeats(){return this.mechanicsData$.pipe(p(t=>t.basicFeats))}getAllMechanics(){return this.mechanicsData$}static \u0275fac=function(e){return new(e||i)(O(P))};static \u0275prov=$({token:i,factory:i.\u0275fac,providedIn:"root"})};var S=(i,t)=>t.name,z=(i,t)=>t.rank,V=(i,t)=>t.type;function H(i,t){if(i&1&&(n(0,"div",11),o(1),a()),i&2){let e=h().$implicit;r(),g("Refresh: ",e.refresh,"")}}function N(i,t){if(i&1&&(n(0,"div",5)(1,"h3",8),o(2),n(3,"span",9),o(4),a()(),n(5,"p",10),o(6),a(),C(7,H,2,1,"div",11),a()),i&2){let e=t.$implicit;r(2),c(e.name),r(2),c(e.type),r(2),c(e.description),r(),d(e.refresh?7:-1)}}function L(i,t){if(i&1&&(n(0,"div",5)(1,"h3",12),o(2),n(3,"span",9),o(4),a()(),n(5,"p",10),o(6),a()()),i&2){let e=t.$implicit;r(2),c(e.name),r(2),c(e.type),r(2),c(e.effect)}}function U(i,t){if(i&1&&(n(0,"div",6)(1,"h3",13),o(2),a(),n(3,"div",10),o(4),a()()),i&2){let e=t.$implicit;r(2),g("Level: ",e.rank,""),r(2),g("Total Sum: ",e.value,"")}}function Y(i,t){if(i&1&&(n(0,"div",5)(1,"h3",13),o(2),v(3,"titlecase"),a(),n(4,"code",10),o(5),a()()),i&2){let e=t.$implicit;r(2),c(x(3,2,e.name)),r(3),c(e.formula)}}function q(i,t){if(i&1&&(n(0,"p",10),o(1,"Formula: "),n(2,"code",14),o(3),a()()),i&2){let e=h().$implicit;r(3),c(e.formula)}}function G(i,t){if(i&1&&(n(0,"p",10),o(1,"Fixed Cost: "),n(2,"span",15),o(3),a()()),i&2){let e=h().$implicit;r(3),c(e.cost)}}function J(i,t){if(i&1&&(n(0,"div",5)(1,"h3",13),o(2),v(3,"titlecase"),a(),C(4,q,4,1,"p",10)(5,G,4,1,"p",10),a()),i&2){let e=t.$implicit;r(2),c(x(3,3,e.type)),r(2),d(e.formula?4:-1),r(),d(e.cost!==void 0?5:-1)}}function K(i,t){if(i&1&&(n(0,"section",2)(1,"h2",3),o(2,"Combat Actions"),a(),n(3,"div",4),m(4,N,8,4,"div",5,S),a()(),n(6,"section",2)(7,"h2",3),o(8,"Basic Feats"),a(),n(9,"div",4),m(10,L,7,3,"div",5,S),a()(),n(12,"section",2)(13,"h2",3),o(14,"Rank System"),a(),n(15,"p"),o(16),a(),n(17,"div",4),m(18,U,5,2,"div",6,z),a()(),n(20,"section",2)(21,"h2",3),o(22,"Derived Stats"),a(),n(23,"div",4),m(24,Y,6,4,"div",5,S),a()(),n(26,"section",7)(27,"h2",3),o(28,"Experience Costs"),a(),n(29,"div",4),m(30,J,6,5,"div",5,V),a()()),i&2){let e=t,s=h();r(4),l(e.combatActions),r(6),l(e.basicFeats),r(6),c(e.rankSystem.calculation),r(2),l(e.rankSystem.thresholds),r(6),l(s.getStatsEntries(e.characteristics.derivedStats)),r(6),l(s.getExperienceCostEntries(e.experienceCosts))}}var D=class i{constructor(t){this.gameMechanicsService=t;this.viewModel$=this.initializeViewModel()}destroy$=new u;viewModel$;initializeViewModel(){return E({mechanics:this.gameMechanicsService.getAllMechanics(),combatActions:this.gameMechanicsService.getCombatActions(),basicFeats:this.gameMechanicsService.getBasicFeats()}).pipe(p(({mechanics:t,combatActions:e,basicFeats:s})=>({combatActions:e,basicFeats:s,characteristics:t.characteristics,rankSystem:t.rankSystem,experienceCosts:t.experienceCosts,boonTriggers:t.boonTriggers})),f(1),F(this.destroy$))}getStatsEntries(t){return Object.entries(t).map(([e,s])=>({name:e,formula:s.formula,baseValue:s.baseValue}))}getExperienceCostEntries(t){return Object.entries(t).map(([e,s])=>({type:e,formula:s.formula,cost:s.cost}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)(k(b))};static \u0275cmp=I({type:i,selectors:[["app-game-mechanics"]],standalone:!0,features:[A],decls:5,vars:3,consts:[[1,"bg-gray-50","p-6"],[1,"title","center"],[1,"mechanics-section","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"grid-layout"],[1,"card"],[1,"card","bg-gradient-to-br","from-gray-50","to-gray-100"],[1,"mechanics-section"],[1,"font-semibold","mb-2","name"],[1,"badge-span"],[1,"description"],[1,"info-tag"],[1,"name","mb-1"],[1,"name"],[1,"bg-gray-100","px-2","py-1","rounded"],[1,"font-medium"]],template:function(e,s){if(e&1&&(n(0,"div",0)(1,"h1",1),o(2,"Cheat Sheet"),a(),C(3,K,32,1),v(4,"async"),a()),e&2){let _;r(3),d((_=x(4,1,s.viewModel$))?3:-1,_)}},dependencies:[w,R],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:1rem 0}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;border-left:4px solid #3b82f6;padding:1.5rem;box-shadow:0 2px 5px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #00000026}.border-left-red[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;border-radius:1rem;font-size:.85rem;font-weight:600;border:1px solid rgba(0,0,0,.1);text-transform:uppercase}.info-tag[_ngcontent-%COMP%]{display:inline-block;background-color:#f3f4f6;padding:.4rem 1rem;border-radius:.5rem;font-size:.85rem;color:#374151;font-weight:500;margin-right:.5rem;margin-top:.5rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;border-bottom:2px solid #d1d5db;padding-bottom:.5rem}code[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background-color:#f3f4f6;padding:.3rem .7rem;border-radius:.5rem;font-size:.9rem;font-weight:500;color:#1f2937}@media (max-width: 768px){.grid-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{D as CheatSheetMechanicsComponent};
