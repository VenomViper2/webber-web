import{i as G,j as w,o as R}from"./chunk-YRXTET72.js";import{$a as b,Da as x,G as $,Ha as l,I as g,Ja as p,Ka as d,L as O,La as n,Ma as a,O as T,Qa as f,T as F,Ua as o,Va as c,W as k,Wa as h,Ya as A,ab as v,i as S,n as y,q as m,r as M,va as r,wa as I,x as E}from"./chunk-M4C75B33.js";var C=class i{constructor(e){this.http=e;this.mechanicsData$=this.initializeMechanicsData()}MECHANICS_URL="data/combat-mechanics.json";RETRY_ATTEMPTS=3;mechanicsData$;initializeMechanicsData(){return this.http.get(this.MECHANICS_URL).pipe($(this.RETRY_ATTEMPTS),E(this.handleError),g(1))}handleError(e){let t=e.error instanceof ErrorEvent?`Client-side error: ${e.error.message}`:`Server error: ${e.status} ${e.message}`;return console.error("GameMechanicsService error:",t),y(()=>new Error(t))}getCombatActions(){return this.mechanicsData$.pipe(m(e=>[...e.combatActions.baseActions,...e.combatActions.reactions]))}getBasicFeats(){return this.mechanicsData$.pipe(m(e=>e.basicFeats))}getCharacteristics(){return this.mechanicsData$.pipe(m(e=>e.characteristics))}getRankSystem(){return this.mechanicsData$.pipe(m(e=>e.rankSystem))}getExperienceCosts(){return this.mechanicsData$.pipe(m(e=>e.experienceCosts))}getAllMechanics(){return this.mechanicsData$}static \u0275fac=function(t){return new(t||i)(F(R))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};var _=(i,e)=>e.name,z=(i,e)=>e.rank,j=(i,e)=>e.type;function V(i,e){if(i&1&&(n(0,"div",11),o(1),a()),i&2){let t=f().$implicit;r(),h("Cost: ",t.cost,"")}}function H(i,e){if(i&1&&(n(0,"div",11),o(1),a()),i&2){let t=f().$implicit;r(),h("Refresh: ",t.refresh,"")}}function N(i,e){if(i&1&&(n(0,"div",4)(1,"h3",8),o(2),n(3,"span",9),o(4),a()(),n(5,"p",10),o(6),a(),x(7,V,2,1,"div",11)(8,H,2,1,"div",11),a()),i&2){let t=e.$implicit;r(2),c(t.name),r(2),c(t.type),r(2),c(t.description),r(),l(t.cost?7:-1),r(),l(t.refresh?8:-1)}}function L(i,e){if(i&1&&(n(0,"div",4)(1,"h3",8),o(2),n(3,"span",9),o(4),a()(),n(5,"p",10),o(6),a()()),i&2){let t=e.$implicit;r(2),c(t.name),r(2),c(t.type),r(2),c(t.effect)}}function U(i,e){if(i&1&&(n(0,"div",6)(1,"h3",8),o(2),a(),n(3,"div",12),o(4),a()()),i&2){let t=e.$implicit;r(2),h("Level: ",t.rank,""),r(2),h("Total Sum: ",t.value,"")}}function Y(i,e){if(i&1&&(n(0,"div",4)(1,"h3",8),o(2),b(3,"titlecase"),a(),n(4,"code",13),o(5),a()()),i&2){let t=e.$implicit;r(2),c(v(3,2,t.name)),r(3),c(t.formula)}}function q(i,e){if(i&1&&(n(0,"p",14),o(1,"Formula: "),n(2,"code",15),o(3),a()()),i&2){let t=f().$implicit;r(3),c(t.formula)}}function J(i,e){if(i&1&&(n(0,"p",14),o(1,"Fixed Cost: "),n(2,"span",16),o(3),a()()),i&2){let t=f().$implicit;r(3),c(t.cost)}}function K(i,e){if(i&1&&(n(0,"div",4)(1,"h3",8),o(2),b(3,"titlecase"),a(),x(4,q,4,1,"p",14)(5,J,4,1,"p",14),a()),i&2){let t=e.$implicit;r(2),c(v(3,3,t.type)),r(2),l(t.formula?4:-1),r(),l(t.cost!==void 0?5:-1)}}function Q(i,e){if(i&1&&(n(0,"section",1)(1,"h2",2),o(2,"Combat Actions"),a(),n(3,"div",3),p(4,N,9,5,"div",4,_),a()(),n(6,"section",1)(7,"h2",2),o(8,"Basic Feats"),a(),n(9,"div",3),p(10,L,7,3,"div",4,_),a()(),n(12,"section",1)(13,"h2",2),o(14,"Rank System"),a(),n(15,"p",5),o(16),a(),n(17,"div",3),p(18,U,5,2,"div",6,z),a()(),n(20,"section",1)(21,"h2",2),o(22,"Derived Stats"),a(),n(23,"div",3),p(24,Y,6,4,"div",4,_),a()(),n(26,"section",7)(27,"h2",2),o(28,"Experience Costs"),a(),n(29,"div",3),p(30,K,6,5,"div",4,j),a()()),i&2){let t=e,s=f();r(4),d(t.combatActions),r(6),d(t.basicFeats),r(6),c(t.rankSystem.calculation),r(2),d(t.rankSystem.thresholds),r(6),d(s.getStatsEntries(t.characteristics.derivedStats)),r(6),d(s.getExperienceCostEntries(t.experienceCosts))}}var D=class i{constructor(e){this.gameMechanicsService=e;this.viewModel$=this.initializeViewModel()}destroy$=new S;viewModel$;initializeViewModel(){return M({mechanics:this.gameMechanicsService.getAllMechanics(),combatActions:this.gameMechanicsService.getCombatActions(),basicFeats:this.gameMechanicsService.getBasicFeats()}).pipe(m(({mechanics:e,combatActions:t,basicFeats:s})=>({combatActions:t,basicFeats:s,characteristics:e.characteristics,rankSystem:e.rankSystem,experienceCosts:e.experienceCosts,boonTriggers:e.boonTriggers})),g(1),O(this.destroy$))}getStatsEntries(e){return Object.entries(e).map(([t,s])=>({name:t,formula:s.formula,baseValue:s.baseValue}))}getExperienceCostEntries(e){return Object.entries(e).map(([t,s])=>({type:t,formula:s.formula,cost:s.cost}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||i)(I(C))};static \u0275cmp=k({type:i,selectors:[["app-game-mechanics"]],standalone:!0,features:[A],decls:3,vars:3,consts:[[1,"app-container","bg-gray-50","p-6"],[1,"mechanics-section","mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"grid-layout"],[1,"card"],[1,"text-gray-600","mb-4"],[1,"card","bg-gradient-to-br","from-gray-50","to-gray-100"],[1,"mechanics-section"],[1,"text-xl","font-semibold","mb-2"],[1,"badge-span"],[1,"text-gray-600","my-3"],[1,"info-tag"],[1,"text-gray-700"],[1,"block","bg-gray-100","p-2","rounded","text-sm"],[1,"text-gray-600"],[1,"bg-gray-100","px-2","py-1","rounded"],[1,"font-medium"]],template:function(t,s){if(t&1&&(n(0,"div",0),x(1,Q,32,1),b(2,"async"),a()),t&2){let u;r(),l((u=v(2,1,s.viewModel$))?1:-1,u)}},dependencies:[G,w],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem;margin:1rem 0}.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:.75rem;border-left:4px solid #3b82f6;padding:1.5rem;box-shadow:0 2px 5px #0000001a;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 6px 10px #00000026}.border-left-red[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;border-radius:1rem;font-size:.85rem;font-weight:600;border:1px solid rgba(0,0,0,.1);text-transform:uppercase}.info-tag[_ngcontent-%COMP%]{display:inline-block;background-color:#f3f4f6;padding:.4rem 1rem;border-radius:.5rem;font-size:.85rem;color:#374151;font-weight:500;margin-right:.5rem;margin-top:.5rem}h2[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#1f2937;border-bottom:2px solid #d1d5db;padding-bottom:.5rem}code[_ngcontent-%COMP%]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background-color:#f3f4f6;padding:.3rem .7rem;border-radius:.5rem;font-size:.9rem;font-weight:500;color:#1f2937}@media (max-width: 768px){.grid-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};export{D as GameMechanicsComponent};
